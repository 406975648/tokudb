--- configure.ac.orig	2011-01-05 06:42:35.000000000 -0800
+++ configure.ac	2011-01-05 06:44:00.000000000 -0800
@@ -65,7 +65,7 @@
     AC_MSG_ERROR([mysql_config not found! You have to specify the directory where mysql_config resides to --with-mysql-bindir=PATH.])
   fi
 
-  MYSQL_CFLAGS_ADD=`"$ac_mysql_config" --cflags`
+  MYSQL_CFLAGS_ADD='-g -fmessage-length=0 -D_FORTIFY_SOURCE=2 -DUNIV_LINUX'
   MYSQL_CFLAGS="$MYSQL_CFLAGS $MYSQL_CFLAGS_ADD -DFORCE_DBUG_OFF"
     # FIXME
   AC_SUBST(MYSQL_CFLAGS)
@@ -79,14 +79,10 @@
   AC_ARG_WITH([mysql-plugindir],
     [AS_HELP_STRING([--with-mysql-plugindir=PATH], [MySQL plugin directory where handlersocket.so to be copied])],
     [
-      ac_mysql_plugin_dir=`cd $withval && pwd`
-      if test -d "$ac_mysql_plugin_dir/" ; then
-        PLUGIN_DIR="$ac_mysql_plugin_dir"
-        AC_SUBST(PLUGIN_DIR)
-        AC_MSG_RESULT([yes: Using $ac_mysql_plugin_dir])
-      else
-        AC_MSG_ERROR([invalid MySQL plugin directory : $ac_mysql_plugin_dir])
-      fi
+      ac_mysql_plugin_dir=`echo $withval`
+      PLUGIN_DIR="$ac_mysql_plugin_dir"
+      AC_SUBST(PLUGIN_DIR)
+      AC_MSG_RESULT([yes: Using $ac_mysql_plugin_dir])
     ],
     [
       LIB_DIR_TMP=`"$ac_mysql_config" --plugindir`
